// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
package templ_ms22

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func Dashboard() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"w-full\"><div id=\"dashboardContent\" hx-get=\"/api/dashboard\" hx-trigger=\"load, every 5s\" hx-swap=\"none\" hx-on::after-request=\"updateDashboard(event)\"><div class=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\"><div class=\"bg-black border-4 border-yellow-400 shadow-lg p-6\"><div class=\"flex items-center justify-between\"><div><p class=\"text-white text-sm font-medium\">Total Scans</p><p id=\"totalScans\" class=\"text-3xl font-bold mt-2 text-yellow-400\">0</p></div><div class=\"bg-yellow-400 p-3\"><i class=\"fas fa-search text-2xl text-black\"></i></div></div></div><div class=\"bg-black border-4 border-yellow-400 shadow-lg p-6\"><div class=\"flex items-center justify-between\"><div><p class=\"text-white text-sm font-medium\">Total Findings</p><p id=\"totalFindings\" class=\"text-3xl font-bold mt-2 text-yellow-400\">0</p></div><div class=\"bg-yellow-400 p-3\"><i class=\"fas fa-exclamation-triangle text-2xl text-black\"></i></div></div></div><div class=\"bg-black border-4 border-yellow-400 shadow-lg p-6\"><div class=\"flex items-center justify-between\"><div><p class=\"text-white text-sm font-medium\">Resources Scanned</p><p id=\"totalResources\" class=\"text-3xl font-bold mt-2 text-yellow-400\">0</p></div><div class=\"bg-yellow-400 p-3\"><i class=\"fas fa-database text-2xl text-black\"></i></div></div></div><div class=\"bg-black border-4 border-yellow-400 shadow-lg p-6\"><div class=\"flex items-center justify-between\"><div><p class=\"text-white text-sm font-medium\">Critical Issues</p><p id=\"criticalIssues\" class=\"text-3xl font-bold mt-2 text-yellow-400\">0</p></div><div class=\"bg-yellow-400 p-3\"><i class=\"fas fa-shield-alt text-2xl text-black\"></i></div></div></div></div><div class=\"bg-black border-4 border-yellow-400 shadow-lg p-6 mb-8\"><div class=\"flex items-center justify-between mb-6\"><h2 class=\"text-2xl font-bold text-yellow-400\"><i class=\"fas fa-clock mr-2\"></i>Recent Scans</h2><div class=\"flex items-center space-x-2\"><div class=\"flex items-center space-x-2 bg-yellow-400 px-3 py-1\"><div class=\"w-2 h-2 bg-black rounded-full animate-pulse\"></div><span class=\"text-black text-sm font-medium\">Live</span></div><button hx-get=\"/api/dashboard\" hx-swap=\"none\" hx-on::after-request=\"updateDashboard(event)\" class=\"bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-4 py-2 transition\"><i class=\"fas fa-sync-alt mr-2\"></i>Refresh</button></div></div><div id=\"recentScans\" class=\"space-y-4\"><div class=\"text-center py-8 text-white\"><i class=\"fas fa-spinner fa-spin text-3xl mb-3 text-yellow-400\"></i><p>Loading scans...</p></div></div></div><div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\"><div class=\"bg-black border-4 border-yellow-400 shadow-lg p-6\"><h2 class=\"text-xl font-bold text-yellow-400 mb-4\"><i class=\"fas fa-chart-pie mr-2\"></i>Findings by Type</h2><div id=\"findingsChart\" class=\"h-64\"></div></div><div class=\"bg-black border-4 border-yellow-400 shadow-lg p-6\"><h2 class=\"text-xl font-bold text-yellow-400 mb-4\"><i class=\"fas fa-chart-bar mr-2\"></i>Scan Activity</h2><div id=\"activityChart\" class=\"h-64\"></div></div></div></div></div><script src=\"https://unpkg.com/htmx.org@1.9.10\"></script> <script>\n            function updateDashboard(event) {\n                try {\n                    const data = JSON.parse(event.detail.xhr.response);\n                    \n                    if (data.status === 'success' && data.data) {\n                        updateStats(data.data);\n                        updateRecentScans(data.data.recent_scans || []);\n                        updateCharts(data.data);\n                    }\n                } catch (error) {\n                    console.error('Error updating dashboard:', error);\n                }\n            }\n            \n            function updateStats(data) {\n                document.getElementById('totalScans').textContent = data.total_scans || 0;\n                document.getElementById('totalFindings').textContent = data.total_findings || 0;\n                document.getElementById('totalResources').textContent = data.total_resources_scanned || 0;\n                document.getElementById('criticalIssues').textContent = data.high_severity_findings || 0;\n            }\n            \n            function updateRecentScans(scans) {\n                const container = document.getElementById('recentScans');\n                \n                if (!scans || scans.length === 0) {\n                    container.innerHTML = `\n                        <div class=\"text-center py-8 text-white\">\n                            <i class=\"fas fa-inbox text-3xl mb-3 text-yellow-400\"></i>\n                            <p>No scans found. Start your first scan!</p>\n                            <a href=\"/scan\" class=\"inline-block mt-4 bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-2 px-6 transition shadow-lg\">\n                                <i class=\"fas fa-play mr-2\"></i>Start New Scan\n                            </a>\n                        </div>\n                    `;\n                    return;\n                }\n                \n                container.innerHTML = scans.map(scan => `\n                    <div class=\"border-2 border-yellow-400 p-4 hover:bg-yellow-400 hover:bg-opacity-10 transition\">\n                        <div class=\"flex items-center justify-between\">\n                            <div class=\"flex-1\">\n                                <div class=\"flex items-center space-x-3 mb-2\">\n                                    <span class=\"text-sm font-mono text-yellow-400\">${scan.request_id || 'N/A'}</span>\n                                    <span class=\"text-xs text-white\">${formatDate(scan.created_at)}</span>\n                                </div>\n                                <div class=\"flex items-center space-x-4 text-sm\">\n                                    <span class=\"text-white\">\n                                        <i class=\"fas fa-folder text-yellow-400 mr-1\"></i>\n                                        ${scan.resources_count || 0} Resources\n                                    </span>\n                                    <span class=\"text-white\">\n                                        <i class=\"fas fa-exclamation-circle text-yellow-400 mr-1\"></i>\n                                        ${scan.findings_count || 0} Findings\n                                    </span>\n                                </div>\n                            </div>\n                            <a href=\"/results/${scan.request_id}\" class=\"bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-4 py-2 transition text-sm\">\n                                <i class=\"fas fa-eye mr-1\"></i>View\n                            </a>\n                        </div>\n                    </div>\n                `).join('');\n            }\n            \n            function updateCharts(data) {\n                const findingsChart = document.getElementById('findingsChart');\n                const findingsByType = data.findings_by_type || {};\n                \n                if (Object.keys(findingsByType).length === 0) {\n                    findingsChart.innerHTML = '<div class=\"flex items-center justify-center h-full text-white\">No data available</div>';\n                } else {\n                    const chartHtml = Object.entries(findingsByType).map(([type, count]) => {\n                        const percentage = (count / data.total_findings * 100).toFixed(1);\n                        return `\n                            <div class=\"mb-3\">\n                                <div class=\"flex justify-between text-sm mb-1\">\n                                    <span class=\"font-medium text-yellow-400\">${type}</span>\n                                    <span class=\"text-white\">${count} (${percentage}%)</span>\n                                </div>\n                                <div class=\"w-full bg-gray-800 h-2\">\n                                    <div class=\"bg-yellow-400 h-2 transition-all duration-500\" style=\"width: ${percentage}%\"></div>\n                                </div>\n                            </div>\n                        `;\n                    }).join('');\n                    findingsChart.innerHTML = chartHtml;\n                }\n                \n                const activityChart = document.getElementById('activityChart');\n                const recentScans = data.recent_scans || [];\n                \n                if (recentScans.length === 0) {\n                    activityChart.innerHTML = '<div class=\"flex items-center justify-center h-full text-white\">No scan activity yet</div>';\n                } else {\n                    const stats = [\n                        { label: 'Total Scans', value: data.total_scans || 0, icon: 'fa-search' },\n                        { label: 'Total Resources', value: data.total_resources_scanned || 0, icon: 'fa-database' },\n                        { label: 'Total Findings', value: data.total_findings || 0, icon: 'fa-exclamation-triangle' },\n                        { label: 'Critical Issues', value: data.high_severity_findings || 0, icon: 'fa-shield-alt' }\n                    ];\n                    \n                    const max = Math.max(...stats.map(s => s.value));\n                    const activityHtml = stats.map(stat => {\n                        const percentage = max > 0 ? (stat.value / max * 100).toFixed(1) : 0;\n                        return `\n                            <div class=\"mb-4\">\n                                <div class=\"flex justify-between text-sm mb-2\">\n                                    <span class=\"font-medium text-yellow-400\">\n                                        <i class=\"fas ${stat.icon} mr-2\"></i>${stat.label}\n                                    </span>\n                                    <span class=\"text-white font-bold\">${stat.value}</span>\n                                </div>\n                                <div class=\"w-full bg-gray-800 h-3\">\n                                    <div class=\"bg-yellow-400 h-3 transition-all duration-500\" style=\"width: ${percentage}%\"></div>\n                                </div>\n                            </div>\n                        `;\n                    }).join('');\n                    activityChart.innerHTML = activityHtml;\n                }\n            }\n            \n            function formatDate(dateString) {\n                if (!dateString) return 'N/A';\n                const date = new Date(dateString);\n                const now = new Date();\n                const diff = now - date;\n                const minutes = Math.floor(diff / 60000);\n                const hours = Math.floor(diff / 3600000);\n                const days = Math.floor(diff / 86400000);\n                \n                if (minutes < 1) return 'Just now';\n                if (minutes < 60) return `${minutes}m ago`;\n                if (hours < 24) return `${hours}h ago`;\n                if (days < 7) return `${days}d ago`;\n                return date.toLocaleDateString();\n            }\n        </script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = Layout("Dashboard").Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
